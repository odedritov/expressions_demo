(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function le(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Oe(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),t}var te,pe;function Re(){if(pe)return te;pe=1;const r=e=>{const t=new Set;do for(const n of Reflect.ownKeys(e))t.add([e,n]);while((e=Reflect.getPrototypeOf(e))&&e!==Object.prototype);return t};return te=(e,{include:t,exclude:n}={})=>{const s=l=>{const a=o=>typeof o=="string"?l===o:o.test(l);return t?t.some(a):n?!n.some(a):!0};for(const[l,a]of r(e.constructor.prototype)){if(a==="constructor"||!s(a))continue;const o=Reflect.getOwnPropertyDescriptor(l,a);o&&typeof o.value=="function"&&(e[a]=e[a].bind(e))}return e},te}var Ne=Re();const ce=le(Ne);var q={exports:{}},Me=q.exports,me;function Pe(){return me||(me=1,function(r){(function(e,t,n){function s(i){var d=this,h=o();d.next=function(){var c=2091639*d.s0+d.c*23283064365386963e-26;return d.s0=d.s1,d.s1=d.s2,d.s2=c-(d.c=c|0)},d.c=1,d.s0=h(" "),d.s1=h(" "),d.s2=h(" "),d.s0-=h(i),d.s0<0&&(d.s0+=1),d.s1-=h(i),d.s1<0&&(d.s1+=1),d.s2-=h(i),d.s2<0&&(d.s2+=1),h=null}function l(i,d){return d.c=i.c,d.s0=i.s0,d.s1=i.s1,d.s2=i.s2,d}function a(i,d){var h=new s(i),c=d&&d.state,u=h.next;return u.int32=function(){return h.next()*4294967296|0},u.double=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.quick=u,c&&(typeof c=="object"&&l(c,h),u.state=function(){return l(h,{})}),u}function o(){var i=4022871197,d=function(h){h=String(h);for(var c=0;c<h.length;c++){i+=h.charCodeAt(c);var u=.02519603282416938*i;i=u>>>0,u-=i,u*=i,i=u>>>0,u-=i,i+=u*4294967296}return(i>>>0)*23283064365386963e-26};return d}t&&t.exports?t.exports=a:this.alea=a})(Me,r)}(q)),q.exports}var G={exports:{}},Ve=G.exports,ge;function De(){return ge||(ge=1,function(r){(function(e,t,n){function s(o){var i=this,d="";i.x=0,i.y=0,i.z=0,i.w=0,i.next=function(){var c=i.x^i.x<<11;return i.x=i.y,i.y=i.z,i.z=i.w,i.w^=i.w>>>19^c^c>>>8},o===(o|0)?i.x=o:d+=o;for(var h=0;h<d.length+64;h++)i.x^=d.charCodeAt(h)|0,i.next()}function l(o,i){return i.x=o.x,i.y=o.y,i.z=o.z,i.w=o.w,i}function a(o,i){var d=new s(o),h=i&&i.state,c=function(){return(d.next()>>>0)/4294967296};return c.double=function(){do var u=d.next()>>>11,f=(d.next()>>>0)/4294967296,p=(u+f)/(1<<21);while(p===0);return p},c.int32=d.next,c.quick=c,h&&(typeof h=="object"&&l(h,d),c.state=function(){return l(d,{})}),c}t&&t.exports?t.exports=a:this.xor128=a})(Ve,r)}(G)),G.exports}var K={exports:{}},$e=K.exports,ye;function Be(){return ye||(ye=1,function(r){(function(e,t,n){function s(o){var i=this,d="";i.next=function(){var c=i.x^i.x>>>2;return i.x=i.y,i.y=i.z,i.z=i.w,i.w=i.v,(i.d=i.d+362437|0)+(i.v=i.v^i.v<<4^(c^c<<1))|0},i.x=0,i.y=0,i.z=0,i.w=0,i.v=0,o===(o|0)?i.x=o:d+=o;for(var h=0;h<d.length+64;h++)i.x^=d.charCodeAt(h)|0,h==d.length&&(i.d=i.x<<10^i.x>>>4),i.next()}function l(o,i){return i.x=o.x,i.y=o.y,i.z=o.z,i.w=o.w,i.v=o.v,i.d=o.d,i}function a(o,i){var d=new s(o),h=i&&i.state,c=function(){return(d.next()>>>0)/4294967296};return c.double=function(){do var u=d.next()>>>11,f=(d.next()>>>0)/4294967296,p=(u+f)/(1<<21);while(p===0);return p},c.int32=d.next,c.quick=c,h&&(typeof h=="object"&&l(h,d),c.state=function(){return l(d,{})}),c}t&&t.exports?t.exports=a:this.xorwow=a})($e,r)}(K)),K.exports}var F={exports:{}},ze=F.exports,be;function Ue(){return be||(be=1,function(r){(function(e,t,n){function s(o){var i=this;i.next=function(){var h=i.x,c=i.i,u,f;return u=h[c],u^=u>>>7,f=u^u<<24,u=h[c+1&7],f^=u^u>>>10,u=h[c+3&7],f^=u^u>>>3,u=h[c+4&7],f^=u^u<<7,u=h[c+7&7],u=u^u<<13,f^=u^u<<9,h[c]=f,i.i=c+1&7,f};function d(h,c){var u,f=[];if(c===(c|0))f[0]=c;else for(c=""+c,u=0;u<c.length;++u)f[u&7]=f[u&7]<<15^c.charCodeAt(u)+f[u+1&7]<<13;for(;f.length<8;)f.push(0);for(u=0;u<8&&f[u]===0;++u);for(u==8?f[7]=-1:f[u],h.x=f,h.i=0,u=256;u>0;--u)h.next()}d(i,o)}function l(o,i){return i.x=o.x.slice(),i.i=o.i,i}function a(o,i){o==null&&(o=+new Date);var d=new s(o),h=i&&i.state,c=function(){return(d.next()>>>0)/4294967296};return c.double=function(){do var u=d.next()>>>11,f=(d.next()>>>0)/4294967296,p=(u+f)/(1<<21);while(p===0);return p},c.int32=d.next,c.quick=c,h&&(h.x&&l(h,d),c.state=function(){return l(d,{})}),c}t&&t.exports?t.exports=a:this.xorshift7=a})(ze,r)}(F)),F.exports}var W={exports:{}},qe=W.exports,we;function Ge(){return we||(we=1,function(r){(function(e,t,n){function s(o){var i=this;i.next=function(){var h=i.w,c=i.X,u=i.i,f,p;return i.w=h=h+1640531527|0,p=c[u+34&127],f=c[u=u+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=c[u]=p^f,i.i=u,p+(h^h>>>16)|0};function d(h,c){var u,f,p,b,T,k=[],O=128;for(c===(c|0)?(f=c,c=null):(c=c+"\0",f=0,O=Math.max(O,c.length)),p=0,b=-32;b<O;++b)c&&(f^=c.charCodeAt((b+32)%c.length)),b===0&&(T=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,b>=0&&(T=T+1640531527|0,u=k[b&127]^=f+T,p=u==0?p+1:0);for(p>=128&&(k[(c&&c.length||0)&127]=-1),p=127,b=4*128;b>0;--b)f=k[p+34&127],u=k[p=p+1&127],f^=f<<13,u^=u<<17,f^=f>>>15,u^=u>>>12,k[p]=f^u;h.w=T,h.X=k,h.i=p}d(i,o)}function l(o,i){return i.i=o.i,i.w=o.w,i.X=o.X.slice(),i}function a(o,i){o==null&&(o=+new Date);var d=new s(o),h=i&&i.state,c=function(){return(d.next()>>>0)/4294967296};return c.double=function(){do var u=d.next()>>>11,f=(d.next()>>>0)/4294967296,p=(u+f)/(1<<21);while(p===0);return p},c.int32=d.next,c.quick=c,h&&(h.X&&l(h,d),c.state=function(){return l(d,{})}),c}t&&t.exports?t.exports=a:this.xor4096=a})(qe,r)}(W)),W.exports}var J={exports:{}},Ke=J.exports,ve;function Fe(){return ve||(ve=1,function(r){(function(e,t,n){function s(o){var i=this,d="";i.next=function(){var c=i.b,u=i.c,f=i.d,p=i.a;return c=c<<25^c>>>7^u,u=u-f|0,f=f<<24^f>>>8^p,p=p-c|0,i.b=c=c<<20^c>>>12^u,i.c=u=u-f|0,i.d=f<<16^u>>>16^p,i.a=p-c|0},i.a=0,i.b=0,i.c=-1640531527,i.d=1367130551,o===Math.floor(o)?(i.a=o/4294967296|0,i.b=o|0):d+=o;for(var h=0;h<d.length+20;h++)i.b^=d.charCodeAt(h)|0,i.next()}function l(o,i){return i.a=o.a,i.b=o.b,i.c=o.c,i.d=o.d,i}function a(o,i){var d=new s(o),h=i&&i.state,c=function(){return(d.next()>>>0)/4294967296};return c.double=function(){do var u=d.next()>>>11,f=(d.next()>>>0)/4294967296,p=(u+f)/(1<<21);while(p===0);return p},c.int32=d.next,c.quick=c,h&&(typeof h=="object"&&l(h,d),c.state=function(){return l(d,{})}),c}t&&t.exports?t.exports=a:this.tychei=a})(Ke,r)}(J)),J.exports}var Y={exports:{}};const We={},Je=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"})),Ye=Oe(Je);var Xe=Y.exports,xe;function He(){return xe||(xe=1,function(r){(function(e,t,n){var s=256,l=6,a=52,o="random",i=n.pow(s,l),d=n.pow(2,a),h=d*2,c=s-1,u;function f(g,y,E){var v=[];y=y==!0?{entropy:!0}:y||{};var w=k(T(y.entropy?[g,D(t)]:g??O(),3),v),A=new p(v),L=function(){for(var P=A.g(l),j=i,I=0;P<d;)P=(P+I)*s,j*=s,I=A.g(1);for(;P>=h;)P/=2,j/=2,I>>>=1;return(P+I)/j};return L.int32=function(){return A.g(4)|0},L.quick=function(){return A.g(4)/4294967296},L.double=L,k(D(A.S),t),(y.pass||E||function(P,j,I,R){return R&&(R.S&&b(R,A),P.state=function(){return b(A,{})}),I?(n[o]=P,j):P})(L,w,"global"in y?y.global:this==n,y.state)}function p(g){var y,E=g.length,v=this,w=0,A=v.i=v.j=0,L=v.S=[];for(E||(g=[E++]);w<s;)L[w]=w++;for(w=0;w<s;w++)L[w]=L[A=c&A+g[w%E]+(y=L[w])],L[A]=y;(v.g=function(P){for(var j,I=0,R=v.i,z=v.j,B=v.S;P--;)j=B[R=c&R+1],I=I*s+B[c&(B[R]=B[z=c&z+j])+(B[z]=j)];return v.i=R,v.j=z,I})(s)}function b(g,y){return y.i=g.i,y.j=g.j,y.S=g.S.slice(),y}function T(g,y){var E=[],v=typeof g,w;if(y&&v=="object")for(w in g)try{E.push(T(g[w],y-1))}catch{}return E.length?E:v=="string"?g:g+"\0"}function k(g,y){for(var E=g+"",v,w=0;w<E.length;)y[c&w]=c&(v^=y[c&w]*19)+E.charCodeAt(w++);return D(y)}function O(){try{var g;return u&&(g=u.randomBytes)?g=g(s):(g=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(g)),D(g)}catch{var y=e.navigator,E=y&&y.plugins;return[+new Date,e,E,e.screen,D(t)]}}function D(g){return String.fromCharCode.apply(0,g)}if(k(n.random(),t),r.exports){r.exports=f;try{u=Ye}catch{}}else n["seed"+o]=f})(typeof self<"u"?self:Xe,[],Math)}(Y)),Y.exports}var ne,_e;function Qe(){if(_e)return ne;_e=1;var r=Pe(),e=De(),t=Be(),n=Ue(),s=Ge(),l=Fe(),a=He();return a.alea=r,a.xor128=e,a.xorwow=t,a.xorshift7=n,a.xor4096=s,a.tychei=l,ne=a,ne}var ie,Ee;function Ze(){if(Ee)return ie;Ee=1;var r=Qe(),e=["ability","able","aboard","about","above","accept","accident","according","account","accurate","acres","across","act","action","active","activity","actual","actually","add","addition","additional","adjective","adult","adventure","advice","affect","afraid","after","afternoon","again","against","age","ago","agree","ahead","aid","air","airplane","alike","alive","all","allow","almost","alone","along","aloud","alphabet","already","also","although","am","among","amount","ancient","angle","angry","animal","announced","another","answer","ants","any","anybody","anyone","anything","anyway","anywhere","apart","apartment","appearance","apple","applied","appropriate","are","area","arm","army","around","arrange","arrangement","arrive","arrow","art","article","as","aside","ask","asleep","at","ate","atmosphere","atom","atomic","attached","attack","attempt","attention","audience","author","automobile","available","average","avoid","aware","away","baby","back","bad","badly","bag","balance","ball","balloon","band","bank","bar","bare","bark","barn","base","baseball","basic","basis","basket","bat","battle","be","bean","bear","beat","beautiful","beauty","became","because","become","becoming","bee","been","before","began","beginning","begun","behavior","behind","being","believed","bell","belong","below","belt","bend","beneath","bent","beside","best","bet","better","between","beyond","bicycle","bigger","biggest","bill","birds","birth","birthday","bit","bite","black","blank","blanket","blew","blind","block","blood","blow","blue","board","boat","body","bone","book","border","born","both","bottle","bottom","bound","bow","bowl","box","boy","brain","branch","brass","brave","bread","break","breakfast","breath","breathe","breathing","breeze","brick","bridge","brief","bright","bring","broad","broke","broken","brother","brought","brown","brush","buffalo","build","building","built","buried","burn","burst","bus","bush","business","busy","but","butter","buy","by","cabin","cage","cake","call","calm","came","camera","camp","can","canal","cannot","cap","capital","captain","captured","car","carbon","card","care","careful","carefully","carried","carry","case","cast","castle","cat","catch","cattle","caught","cause","cave","cell","cent","center","central","century","certain","certainly","chain","chair","chamber","chance","change","changing","chapter","character","characteristic","charge","chart","check","cheese","chemical","chest","chicken","chief","child","children","choice","choose","chose","chosen","church","circle","circus","citizen","city","class","classroom","claws","clay","clean","clear","clearly","climate","climb","clock","close","closely","closer","cloth","clothes","clothing","cloud","club","coach","coal","coast","coat","coffee","cold","collect","college","colony","color","column","combination","combine","come","comfortable","coming","command","common","community","company","compare","compass","complete","completely","complex","composed","composition","compound","concerned","condition","congress","connected","consider","consist","consonant","constantly","construction","contain","continent","continued","contrast","control","conversation","cook","cookies","cool","copper","copy","corn","corner","correct","correctly","cost","cotton","could","count","country","couple","courage","course","court","cover","cow","cowboy","crack","cream","create","creature","crew","crop","cross","crowd","cry","cup","curious","current","curve","customs","cut","cutting","daily","damage","dance","danger","dangerous","dark","darkness","date","daughter","dawn","day","dead","deal","dear","death","decide","declared","deep","deeply","deer","definition","degree","depend","depth","describe","desert","design","desk","detail","determine","develop","development","diagram","diameter","did","die","differ","difference","different","difficult","difficulty","dig","dinner","direct","direction","directly","dirt","dirty","disappear","discover","discovery","discuss","discussion","disease","dish","distance","distant","divide","division","do","doctor","does","dog","doing","doll","dollar","done","donkey","door","dot","double","doubt","down","dozen","draw","drawn","dream","dress","drew","dried","drink","drive","driven","driver","driving","drop","dropped","drove","dry","duck","due","dug","dull","during","dust","duty","each","eager","ear","earlier","early","earn","earth","easier","easily","east","easy","eat","eaten","edge","education","effect","effort","egg","eight","either","electric","electricity","element","elephant","eleven","else","empty","end","enemy","energy","engine","engineer","enjoy","enough","enter","entire","entirely","environment","equal","equally","equator","equipment","escape","especially","essential","establish","even","evening","event","eventually","ever","every","everybody","everyone","everything","everywhere","evidence","exact","exactly","examine","example","excellent","except","exchange","excited","excitement","exciting","exclaimed","exercise","exist","expect","experience","experiment","explain","explanation","explore","express","expression","extra","eye","face","facing","fact","factor","factory","failed","fair","fairly","fall","fallen","familiar","family","famous","far","farm","farmer","farther","fast","fastened","faster","fat","father","favorite","fear","feathers","feature","fed","feed","feel","feet","fell","fellow","felt","fence","few","fewer","field","fierce","fifteen","fifth","fifty","fight","fighting","figure","fill","film","final","finally","find","fine","finest","finger","finish","fire","fireplace","firm","first","fish","five","fix","flag","flame","flat","flew","flies","flight","floating","floor","flow","flower","fly","fog","folks","follow","food","foot","football","for","force","foreign","forest","forget","forgot","forgotten","form","former","fort","forth","forty","forward","fought","found","four","fourth","fox","frame","free","freedom","frequently","fresh","friend","friendly","frighten","frog","from","front","frozen","fruit","fuel","full","fully","fun","function","funny","fur","furniture","further","future","gain","game","garage","garden","gas","gasoline","gate","gather","gave","general","generally","gentle","gently","get","getting","giant","gift","girl","give","given","giving","glad","glass","globe","go","goes","gold","golden","gone","good","goose","got","government","grabbed","grade","gradually","grain","grandfather","grandmother","graph","grass","gravity","gray","great","greater","greatest","greatly","green","grew","ground","group","grow","grown","growth","guard","guess","guide","gulf","gun","habit","had","hair","half","halfway","hall","hand","handle","handsome","hang","happen","happened","happily","happy","harbor","hard","harder","hardly","has","hat","have","having","hay","he","headed","heading","health","heard","hearing","heart","heat","heavy","height","held","hello","help","helpful","her","herd","here","herself","hidden","hide","high","higher","highest","highway","hill","him","himself","his","history","hit","hold","hole","hollow","home","honor","hope","horn","horse","hospital","hot","hour","house","how","however","huge","human","hundred","hung","hungry","hunt","hunter","hurried","hurry","hurt","husband","ice","idea","identity","if","ill","image","imagine","immediately","importance","important","impossible","improve","in","inch","include","including","income","increase","indeed","independent","indicate","individual","industrial","industry","influence","information","inside","instance","instant","instead","instrument","interest","interior","into","introduced","invented","involved","iron","is","island","it","its","itself","jack","jar","jet","job","join","joined","journey","joy","judge","jump","jungle","just","keep","kept","key","kids","kill","kind","kitchen","knew","knife","know","knowledge","known","label","labor","lack","lady","laid","lake","lamp","land","language","large","larger","largest","last","late","later","laugh","law","lay","layers","lead","leader","leaf","learn","least","leather","leave","leaving","led","left","leg","length","lesson","let","letter","level","library","lie","life","lift","light","like","likely","limited","line","lion","lips","liquid","list","listen","little","live","living","load","local","locate","location","log","lonely","long","longer","look","loose","lose","loss","lost","lot","loud","love","lovely","low","lower","luck","lucky","lunch","lungs","lying","machine","machinery","mad","made","magic","magnet","mail","main","mainly","major","make","making","man","managed","manner","manufacturing","many","map","mark","market","married","mass","massage","master","material","mathematics","matter","may","maybe","me","meal","mean","means","meant","measure","meat","medicine","meet","melted","member","memory","men","mental","merely","met","metal","method","mice","middle","might","mighty","mile","military","milk","mill","mind","mine","minerals","minute","mirror","missing","mission","mistake","mix","mixture","model","modern","molecular","moment","money","monkey","month","mood","moon","more","morning","most","mostly","mother","motion","motor","mountain","mouse","mouth","move","movement","movie","moving","mud","muscle","music","musical","must","my","myself","mysterious","nails","name","nation","national","native","natural","naturally","nature","near","nearby","nearer","nearest","nearly","necessary","neck","needed","needle","needs","negative","neighbor","neighborhood","nervous","nest","never","new","news","newspaper","next","nice","night","nine","no","nobody","nodded","noise","none","noon","nor","north","nose","not","note","noted","nothing","notice","noun","now","number","numeral","nuts","object","observe","obtain","occasionally","occur","ocean","of","off","offer","office","officer","official","oil","old","older","oldest","on","once","one","only","onto","open","operation","opinion","opportunity","opposite","or","orange","orbit","order","ordinary","organization","organized","origin","original","other","ought","our","ourselves","out","outer","outline","outside","over","own","owner","oxygen","pack","package","page","paid","pain","paint","pair","palace","pale","pan","paper","paragraph","parallel","parent","park","part","particles","particular","particularly","partly","parts","party","pass","passage","past","path","pattern","pay","peace","pen","pencil","people","per","percent","perfect","perfectly","perhaps","period","person","personal","pet","phrase","physical","piano","pick","picture","pictured","pie","piece","pig","pile","pilot","pine","pink","pipe","pitch","place","plain","plan","plane","planet","planned","planning","plant","plastic","plate","plates","play","pleasant","please","pleasure","plenty","plural","plus","pocket","poem","poet","poetry","point","pole","police","policeman","political","pond","pony","pool","poor","popular","population","porch","port","position","positive","possible","possibly","post","pot","potatoes","pound","pour","powder","power","powerful","practical","practice","prepare","present","president","press","pressure","pretty","prevent","previous","price","pride","primitive","principal","principle","printed","private","prize","probably","problem","process","produce","product","production","program","progress","promised","proper","properly","property","protection","proud","prove","provide","public","pull","pupil","pure","purple","purpose","push","put","putting","quarter","queen","question","quick","quickly","quiet","quietly","quite","rabbit","race","radio","railroad","rain","raise","ran","ranch","range","rapidly","rate","rather","raw","rays","reach","read","reader","ready","real","realize","rear","reason","recall","receive","recent","recently","recognize","record","red","refer","refused","region","regular","related","relationship","religious","remain","remarkable","remember","remove","repeat","replace","replied","report","represent","require","research","respect","rest","result","return","review","rhyme","rhythm","rice","rich","ride","riding","right","ring","rise","rising","river","road","roar","rock","rocket","rocky","rod","roll","roof","room","root","rope","rose","rough","round","route","row","rubbed","rubber","rule","ruler","run","running","rush","sad","saddle","safe","safety","said","sail","sale","salmon","salt","same","sand","sang","sat","satellites","satisfied","save","saved","saw","say","scale","scared","scene","school","science","scientific","scientist","score","screen","sea","search","season","seat","second","secret","section","see","seed","seeing","seems","seen","seldom","select","selection","sell","send","sense","sent","sentence","separate","series","serious","serve","service","sets","setting","settle","settlers","seven","several","shade","shadow","shake","shaking","shall","shallow","shape","share","sharp","she","sheep","sheet","shelf","shells","shelter","shine","shinning","ship","shirt","shoe","shoot","shop","shore","short","shorter","shot","should","shoulder","shout","show","shown","shut","sick","sides","sight","sign","signal","silence","silent","silk","silly","silver","similar","simple","simplest","simply","since","sing","single","sink","sister","sit","sitting","situation","six","size","skill","skin","sky","slabs","slave","sleep","slept","slide","slight","slightly","slip","slipped","slope","slow","slowly","small","smaller","smallest","smell","smile","smoke","smooth","snake","snow","so","soap","social","society","soft","softly","soil","solar","sold","soldier","solid","solution","solve","some","somebody","somehow","someone","something","sometime","somewhere","son","song","soon","sort","sound","source","south","southern","space","speak","special","species","specific","speech","speed","spell","spend","spent","spider","spin","spirit","spite","split","spoken","sport","spread","spring","square","stage","stairs","stand","standard","star","stared","start","state","statement","station","stay","steady","steam","steel","steep","stems","step","stepped","stick","stiff","still","stock","stomach","stone","stood","stop","stopped","store","storm","story","stove","straight","strange","stranger","straw","stream","street","strength","stretch","strike","string","strip","strong","stronger","struck","structure","struggle","stuck","student","studied","studying","subject","substance","success","successful","such","sudden","suddenly","sugar","suggest","suit","sum","summer","sun","sunlight","supper","supply","support","suppose","sure","surface","surprise","surrounded","swam","sweet","swept","swim","swimming","swing","swung","syllable","symbol","system","table","tail","take","taken","tales","talk","tall","tank","tape","task","taste","taught","tax","tea","teach","teacher","team","tears","teeth","telephone","television","tell","temperature","ten","tent","term","terrible","test","than","thank","that","thee","them","themselves","then","theory","there","therefore","these","they","thick","thin","thing","think","third","thirty","this","those","thou","though","thought","thousand","thread","three","threw","throat","through","throughout","throw","thrown","thumb","thus","thy","tide","tie","tight","tightly","till","time","tin","tiny","tip","tired","title","to","tobacco","today","together","told","tomorrow","tone","tongue","tonight","too","took","tool","top","topic","torn","total","touch","toward","tower","town","toy","trace","track","trade","traffic","trail","train","transportation","trap","travel","treated","tree","triangle","tribe","trick","tried","trip","troops","tropical","trouble","truck","trunk","truth","try","tube","tune","turn","twelve","twenty","twice","two","type","typical","uncle","under","underline","understanding","unhappy","union","unit","universe","unknown","unless","until","unusual","up","upon","upper","upward","us","use","useful","using","usual","usually","valley","valuable","value","vapor","variety","various","vast","vegetable","verb","vertical","very","vessels","victory","view","village","visit","visitor","voice","volume","vote","vowel","voyage","wagon","wait","walk","wall","want","war","warm","warn","was","wash","waste","watch","water","wave","way","we","weak","wealth","wear","weather","week","weigh","weight","welcome","well","went","were","west","western","wet","whale","what","whatever","wheat","wheel","when","whenever","where","wherever","whether","which","while","whispered","whistle","white","who","whole","whom","whose","why","wide","widely","wife","wild","will","willing","win","wind","window","wing","winter","wire","wise","wish","with","within","without","wolf","women","won","wonder","wonderful","wood","wooden","wool","word","wore","work","worker","world","worried","worry","worse","worth","would","wrapped","write","writer","writing","written","wrong","wrote","yard","year","yellow","yes","yesterday","yet","you","young","younger","your","yourself","youth","zero","zebra","zipper","zoo","zulu"];function t(n){const s=n!=null&&n.seed?new r(n.seed):null;function l(){return n&&n.maxLength>1?a():o()}function a(){for(var p=!1,b;!p;)b=o(),b.length<=n.maxLength&&(p=!0);return b}function o(){return e[i(e.length)]}function i(p){const b=s?s():Math.random();return Math.floor(b*p)}if(typeof n>"u")return l();typeof n=="number"&&(n={exactly:n}),n.exactly&&(n.min=n.exactly,n.max=n.exactly),typeof n.wordsPerString!="number"&&(n.wordsPerString=1),typeof n.formatter!="function"&&(n.formatter=p=>p),typeof n.separator!="string"&&(n.separator=" ");for(var d=n.min+i(n.max+1-n.min),h=[],c="",u=0,f=0;f<d*n.wordsPerString;f++)u===n.wordsPerString-1?c+=n.formatter(l(),u):c+=n.formatter(l(),u)+n.separator,u++,(f+1)%n.wordsPerString===0&&(h.push(c),c="",u=0);return typeof n.join=="string"&&(h=h.join(n.join)),h}return ie=t,t.wordList=e,ie}var et=Ze();const tt=le(et);var nt=Pe();const it=le(nt);var st="8.2.1";class H{constructor(e,t){this.dependencies=e,this.extensionsConfiguration=t,this.extensions=Object.fromEntries(t.map(n=>[H.getExtensionNameByClass(n.type),this.dependencies.instantiateExtension(n.type)]))}static getExtensionNameByClass(e){return e.info.name}getExtensionInstanceByClass(e){return this.extensions[H.getExtensionNameByClass(e)]}async initializeExtensions(){await Promise.all(this.extensionsConfiguration.map(({type:e,params:t={}})=>{this.getExtensionInstanceByClass(e).initialize(t);const n=e.info;!("version"in n)&&!("data"in n)?console.warn(n.name,"is missing the 'version' and 'data' fields. Please update extension as 'version' and 'data' will be required in v9. See https://www.jspsych.org/latest/developers/extension-development/ for more details."):"version"in n?"data"in n||console.warn(n.name,"is missing the 'data' field. Please update extension as 'data' will be required in v9. See https://www.jspsych.org/latest/developers/extension-development/ for more details."):console.warn(n.name,"is missing the 'version' field. Please update extension as 'version' will be required in v9. See https://www.jspsych.org/latest/developers/extension-development/ for more details.")}))}onStart(e=[]){var t;for(const{type:n,params:s}of e)(t=this.getExtensionInstanceByClass(n))==null||t.on_start(s)}onLoad(e=[]){var t;for(const{type:n,params:s}of e)(t=this.getExtensionInstanceByClass(n))==null||t.on_load(s)}async onFinish(e=[]){const t=await Promise.all(e.map(({type:s,params:l})=>{var a;return Promise.resolve((a=this.getExtensionInstanceByClass(s))==null?void 0:a.on_finish(l))})),n=e.length?{extension_type:e.map(({type:s})=>s.info.name),extension_version:e.map(({type:s})=>s.info.version)}:{};return t.unshift(n),Object.assign({},...t)}}function X(r){return[...new Set(r)]}function S(r){if(!r)return r;let e;if(Array.isArray(r)){e=[];for(const t of r)e.push(S(t));return e}else if(typeof r=="object"&&r!==null){e={};for(const t in r)r.hasOwnProperty(t)&&(e[t]=S(r[t]));return e}else return r}function Q(r,e){let t={};for(const n in r)r.hasOwnProperty(n)&&(typeof r[n]=="object"&&e.hasOwnProperty(n)?t[n]=Q(r[n],e[n]):t[n]=r[n]);for(const n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)&&typeof e[n]=="object"?t[n]=Q(t[n],e[n]):t[n]=e[n]);return t}var rt=Object.freeze({__proto__:null,deepCopy:S,deepMerge:Q,unique:X});class ue{constructor(e=[]){this.values=e}sum(){let e=0;for(const t of this.values)e+=t;return e}mean(){let e=0,t=0;for(const n of this.values)typeof n<"u"&&n!==null&&(e+=n,t++);if(t!==0)return e/t}median(){if(this.values.length===0)return;const e=this.values.slice(0).sort(function(s,l){return s-l}),t=Math.floor(e.length/2);return e.length%2===0?(e[t]+e[t-1])/2:e[t]}min(){return Math.min.apply(null,this.values)}max(){return Math.max.apply(null,this.values)}count(){return this.values.length}variance(){const e=this.mean();let t=0;for(const s of this.values)t+=Math.pow(s-e,2);return t/(this.values.length-1)}sd(){const e=this.variance();return Math.sqrt(e)}frequencies(){const e={};for(const t of this.values)typeof e[t]>"u"?e[t]=1:e[t]++;return e}all(e){for(const t of this.values)if(!e(t))return!1;return!0}subset(e){const t=[];for(const n of this.values)e(n)&&t.push(n);return new ue(t)}}function ot(r,e){const t=new Blob([r],{type:"text/plain"});let n="";typeof window.webkitURL<"u"?n=window.webkitURL.createObjectURL(t):n=window.URL.createObjectURL(t);const s=document.createElement("a");s.id="jspsych-download-as-text-link",s.style.display="none",s.download=e,s.href=n,s.click()}function at(r){const e=typeof r!="object"?JSON.parse(r):r;let t="",n="";const s=[];for(const l of e)for(const a in l){let o=a+"";o='"'+o.replace(/"/g,'""')+'",',s.includes(a)||(s.push(a),t+=o)}t=t.slice(0,-1),n+=t+`\r
`;for(const l of e){t="";for(const a of s){let o=typeof l[a]>"u"?"":l[a];typeof o=="object"&&(o=JSON.stringify(o));const i=o+"";t+='"'+i.replace(/"/g,'""')+'",'}t=t.slice(0,-1),n+=t+`\r
`}return n}function lt(){const r=window.location.search.substr(1).split("&"),e={};for(let t=0;t<r.length;++t){const n=r[t].split("=",2);n.length==1?e[n[0]]="":e[n[0]]=decodeURIComponent(n[1].replace(/\+/g," "))}return e}class _{constructor(e=[]){this.trials=e}push(e){return this.trials.push(e),this}join(e){return this.trials=this.trials.concat(e.values()),this}top(){return this.trials.length<=1?this:new _([this.trials[this.trials.length-1]])}first(e=1){if(e<1)throw`You must query with a positive nonzero integer. Please use a
               different value for n.`;return this.trials.length===0?new _:(e>this.trials.length&&(e=this.trials.length),new _(this.trials.slice(0,e)))}last(e=1){if(e<1)throw`You must query with a positive nonzero integer. Please use a
               different value for n.`;return this.trials.length===0?new _:(e>this.trials.length&&(e=this.trials.length),new _(this.trials.slice(this.trials.length-e,this.trials.length)))}values(){return this.trials}count(){return this.trials.length}readOnly(){return new _(S(this.trials))}addToAll(e){for(const t of this.trials)Object.assign(t,e);return this}addToLast(e){return this.trials.length>0&&Object.assign(this.trials[this.trials.length-1],e),this}filter(e){let t;Array.isArray(e)?t=S(e):t=S([e]);const n=[];for(const s of this.trials){let l=!1;for(const a of t){let o=!0;for(const i of Object.keys(a))typeof s[i]<"u"&&s[i]===a[i]||(o=!1);if(o){l=!0;break}}l&&n.push(s)}return new _(n)}filterCustom(e){return new _(this.trials.filter(e))}filterColumns(e){return new _(this.trials.map(t=>Object.fromEntries(e.filter(n=>n in t).map(n=>[n,t[n]]))))}select(e){const t=[];for(const n of this.trials)typeof n[e]<"u"&&t.push(n[e]);return new ue(t)}ignore(e){Array.isArray(e)||(e=[e]);const t=S(this.trials);for(const n of t)for(const s of e)delete n[s];return new _(t)}uniqueNames(){const e=[];for(const t of this.trials)for(const n of Object.keys(t))e.includes(n)||e.push(n);return e}csv(){return at(this.trials)}json(e=!1){return e?JSON.stringify(this.trials,null,"	"):JSON.stringify(this.trials)}localSave(e,t){e=e.toLowerCase();let n;if(e==="json")n=this.json();else if(e==="csv")n=this.csv();else throw new Error('Invalid format specified for localSave. Must be "json" or "csv".');ot(n,t)}}class ct{constructor(e){this.dependencies=e,this.dataProperties={},this.interactionListeners={blur:()=>{this.addInteractionRecord("blur")},focus:()=>{this.addInteractionRecord("focus")},fullscreenchange:()=>{this.addInteractionRecord(document.isFullScreen||document.webkitIsFullScreen||document.mozIsFullScreen||document.fullscreenElement?"fullscreenenter":"fullscreenexit")}},this.reset()}reset(){this.results=new _,this.resultToTrialMap=new WeakMap,this.interactionRecords=new _}get(){return this.results}getInteractionData(){return this.interactionRecords}write(e){const t=e.getResult();Object.assign(t,this.dataProperties),this.results.push(t),this.resultToTrialMap.set(t,e)}addProperties(e){this.results.addToAll(e),this.dataProperties=Object.assign({},this.dataProperties,e)}addDataToLastTrial(e){this.results.addToLast(e)}getLastTrialData(){return this.results.top()}getLastTimelineData(){const e=this.getLastTrialData().values()[0];return new _(e?this.resultToTrialMap.get(e).parent.getResults():[])}displayData(e="json"){e=e.toLowerCase(),e!=="json"&&e!=="csv"&&(console.log("Invalid format declared for displayData function. Using json as default."),e="json");const t=document.createElement("pre");t.id="jspsych-data-display",t.textContent=e==="json"?this.results.json(!0):this.results.csv(),this.dependencies.getDisplayElement().replaceChildren(t)}urlVariables(){return typeof this.query_string>"u"&&(this.query_string=lt()),this.query_string}getURLVariable(e){return this.urlVariables()[e]}addInteractionRecord(e){const t={event:e,...this.dependencies.getProgress()};this.interactionRecords.push(t),this.dependencies.onInteractionRecordAdded(t)}createInteractionListeners(){window.addEventListener("blur",this.interactionListeners.blur),window.addEventListener("focus",this.interactionListeners.focus),document.addEventListener("fullscreenchange",this.interactionListeners.fullscreenchange),document.addEventListener("mozfullscreenchange",this.interactionListeners.fullscreenchange),document.addEventListener("webkitfullscreenchange",this.interactionListeners.fullscreenchange)}removeInteractionListeners(){window.removeEventListener("blur",this.interactionListeners.blur),window.removeEventListener("focus",this.interactionListeners.focus),document.removeEventListener("fullscreenchange",this.interactionListeners.fullscreenchange),document.removeEventListener("mozfullscreenchange",this.interactionListeners.fullscreenchange),document.removeEventListener("webkitfullscreenchange",this.interactionListeners.fullscreenchange)}}class ut{constructor(e,t=!1,n=0){this.getRootElement=e,this.areResponsesCaseSensitive=t,this.minimumValidRt=n,this.listeners=new Set,this.heldKeys=new Set,this.areRootListenersRegistered=!1,ce(this),this.registerRootListeners()}registerRootListeners(){if(!this.areRootListenersRegistered){const e=this.getRootElement();e&&(e.addEventListener("keydown",this.rootKeydownListener),e.addEventListener("keyup",this.rootKeyupListener),this.areRootListenersRegistered=!0)}}rootKeydownListener(e){for(const t of[...this.listeners])t(e);this.heldKeys.add(this.toLowerCaseIfInsensitive(e.key))}toLowerCaseIfInsensitive(e){return this.areResponsesCaseSensitive?e:e.toLowerCase()}rootKeyupListener(e){this.heldKeys.delete(this.toLowerCaseIfInsensitive(e.key))}isResponseValid(e,t,n){return!t&&this.heldKeys.has(n)?!1:e==="ALL_KEYS"?!0:e==="NO_KEYS"?!1:e.includes(n)}getKeyboardResponse({callback_function:e,valid_responses:t="ALL_KEYS",rt_method:n="performance",persist:s,audio_context:l,audio_context_start_time:a,allow_held_key:o=!1,minimum_valid_rt:i=this.minimumValidRt}){n!=="performance"&&n!=="audio"&&(console.log('Invalid RT method specified in getKeyboardResponse. Defaulting to "performance" method.'),n="performance");const h=n==="performance"?performance.now():a*1e3;this.registerRootListeners(),!this.areResponsesCaseSensitive&&typeof t!="string"&&(t=t.map(u=>u.toLowerCase()));const c=u=>{const f=Math.round((n=="performance"?performance.now():l.currentTime*1e3)-h);if(f<i)return;const p=this.toLowerCaseIfInsensitive(u.key);this.isResponseValid(t,o,p)&&(u.preventDefault(),s||this.cancelKeyboardResponse(c),e({key:u.key,rt:f}))};return this.listeners.add(c),c}cancelKeyboardResponse(e){this.listeners.delete(e)}cancelAllKeyboardResponses(){this.listeners.clear()}compareKeys(e,t){if(typeof e!="string"&&e!==null||typeof t!="string"&&t!==null){console.error("Error in jsPsych.pluginAPI.compareKeys: arguments must be key strings or null.");return}return typeof e=="string"&&typeof t=="string"?this.areResponsesCaseSensitive?e===t:e.toLowerCase()===t.toLowerCase():e===null&&t===null}}var m=(r=>(r[r.BOOL=0]="BOOL",r[r.STRING=1]="STRING",r[r.INT=2]="INT",r[r.FLOAT=3]="FLOAT",r[r.FUNCTION=4]="FUNCTION",r[r.KEY=5]="KEY",r[r.KEYS=6]="KEYS",r[r.SELECT=7]="SELECT",r[r.HTML_STRING=8]="HTML_STRING",r[r.IMAGE=9]="IMAGE",r[r.AUDIO=10]="AUDIO",r[r.VIDEO=11]="VIDEO",r[r.OBJECT=12]="OBJECT",r[r.COMPLEX=13]="COMPLEX",r[r.TIMELINE=14]="TIMELINE",r))(m||{});class U{constructor(e,t={useWebAudio:!1}){this.src=e,this.useWebAudio=t.useWebAudio,this.audioContext=t.audioContext||null}async load(){this.useWebAudio?this.webAudioBuffer=await this.preloadWebAudio(this.src):this.audio=await this.preloadHTMLAudio(this.src)}play(){this.audio instanceof HTMLAudioElement?this.audio.play():(this.audio||(this.audio=this.getAudioSourceNode(this.webAudioBuffer)),this.audio.start())}stop(){this.audio instanceof HTMLAudioElement?(this.audio.pause(),this.audio.currentTime=0):(this.audio.stop(),this.audio=this.getAudioSourceNode(this.webAudioBuffer))}addEventListener(e,t){!this.audio&&this.webAudioBuffer&&(this.audio=this.getAudioSourceNode(this.webAudioBuffer)),this.audio.addEventListener(e,t)}removeEventListener(e,t){!this.audio&&this.webAudioBuffer&&(this.audio=this.getAudioSourceNode(this.webAudioBuffer)),this.audio.removeEventListener(e,t)}getAudioSourceNode(e){const t=this.audioContext.createBufferSource();return t.buffer=e,t.connect(this.audioContext.destination),t}async preloadWebAudio(e){const n=await(await fetch(e)).arrayBuffer(),s=await this.audioContext.decodeAudioData(n),l=this.audioContext.createBufferSource();return l.buffer=s,l.connect(this.audioContext.destination),s}async preloadHTMLAudio(e){return new Promise((t,n)=>{const s=new Audio(e);s.addEventListener("canplaythrough",()=>{t(s)}),s.addEventListener("error",l=>{n(l)}),s.addEventListener("abort",l=>{n(l)})})}}const ke=[m.AUDIO,m.IMAGE,m.VIDEO];class dt{constructor(e){this.useWebaudio=e,this.video_buffers={},this.context=null,this.audio_buffers=[],this.preload_requests=[],this.img_cache={},this.preloadMap=new Map,this.microphone_recorder=null,this.camera_stream=null,this.camera_recorder=null,this.useWebaudio&&typeof window<"u"&&typeof window.AudioContext<"u"&&(this.context=new AudioContext)}getVideoBuffer(e){return e.startsWith("blob:")&&(this.video_buffers[e]=e),this.video_buffers[e]}audioContext(){return this.context&&this.context.state!=="running"&&this.context.resume(),this.context}async getAudioPlayer(e){return this.audio_buffers[e]instanceof U?this.audio_buffers[e]:(this.audio_buffers[e]=new U(e,{useWebAudio:this.useWebaudio,audioContext:this.context}),await this.audio_buffers[e].load(),this.audio_buffers[e])}preloadAudio(e,t=()=>{},n=l=>{},s=l=>{}){e=X(e.flat());let l=0;if(e.length==0){t();return}for(const a of e)this.audio_buffers[a]instanceof U?(l++,n(a),l==e.length&&t()):(this.audio_buffers[a]=new U(a,{useWebAudio:this.useWebaudio,audioContext:this.context}),this.audio_buffers[a].load().then(()=>{l++,n(a),l==e.length&&t()}).catch(o=>{s(o)}))}preloadImages(e,t=()=>{},n=l=>{},s=l=>{}){e=X(e.flat());var l=0;if(e.length===0){t();return}for(let a=0;a<e.length;a++){const o=new Image,i=e[a];o.onload=()=>{l++,n(i),l===e.length&&t()},o.onerror=d=>{s({source:i,error:d})},o.src=i,this.img_cache[i]=o,this.preload_requests.push(o)}}preloadVideo(e,t=()=>{},n=l=>{},s=l=>{}){e=X(e.flat());let l=0;if(e.length===0){t();return}for(const a of e){const o=this.video_buffers,i=new XMLHttpRequest;i.open("GET",a,!0),i.responseType="blob",i.onload=()=>{if(i.status===200||i.status===0){const d=i.response;o[a]=URL.createObjectURL(d),l++,n(a),l===e.length&&t()}},i.onerror=d=>{let h=d;i.status==404&&(h="404"),s({source:a,error:h})},i.onloadend=d=>{i.status==404&&s({source:a,error:"404"})},i.send(),this.preload_requests.push(i)}}getAutoPreloadList(e){const t=Object.fromEntries(ke.map(s=>[s,new Set])),n=(s,l)=>{var o;if(typeof s.timeline<"u")for(const i of s.timeline)n(i,s.type??l);else if((o=s.type??l)!=null&&o.info){const{name:i,parameters:d}=(s.type??l).info;this.preloadMap.has(i)||this.preloadMap.set(i,Object.fromEntries(Object.entries(d).filter(([h,{type:c,preload:u}])=>ke.includes(c)&&(u??!0)).map(([h,{type:c}])=>[h,c])));for(const[h,c]of Object.entries(this.preloadMap.get(i))){const u=s[h],f=t[c];if(typeof u=="string")f.add(u);else if(Array.isArray(u))for(const p of u.flat())typeof p=="string"&&f.add(p)}}};return n({timeline:e}),{images:[...t[m.IMAGE]],audio:[...t[m.AUDIO]],video:[...t[m.VIDEO]]}}cancelPreloads(){for(const e of this.preload_requests)e.onload=()=>{},e.onerror=()=>{},e.oncanplaythrough=()=>{},e.onabort=()=>{};this.preload_requests=[]}initializeMicrophoneRecorder(e){const t=new MediaRecorder(e);this.microphone_recorder=t}getMicrophoneRecorder(){return this.microphone_recorder}initializeCameraRecorder(e,t){this.camera_stream=e;const n=new MediaRecorder(e,t);this.camera_recorder=n}getCameraStream(){return this.camera_stream}getCameraRecorder(){return this.camera_recorder}}class ht{constructor(e,t){this.getDisplayContainerElement=e,this.setJsPsychTimeout=t}dispatchEvent(e){this.getDisplayContainerElement().dispatchEvent(e)}keyDown(e){this.dispatchEvent(new KeyboardEvent("keydown",{key:e}))}keyUp(e){this.dispatchEvent(new KeyboardEvent("keyup",{key:e}))}pressKey(e,t=0){t>0?this.setJsPsychTimeout(()=>{this.keyDown(e),this.keyUp(e)},t):(this.keyDown(e),this.keyUp(e))}clickTarget(e,t=0){t>0?this.setJsPsychTimeout(()=>{e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0}))},t):(e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0})))}fillTextInput(e,t,n=0){n>0?this.setJsPsychTimeout(()=>{e.value=t},n):e.value=t}getValidKey(e){const t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"," "];let n;if(e=="NO_KEYS")n=null;else if(e=="ALL_KEYS")n=t[Math.floor(Math.random()*t.length)];else{const s=e.flat();n=s[Math.floor(Math.random()*s.length)]}return n}mergeSimulationData(e,t){return{...e,...t==null?void 0:t.data}}ensureSimulationDataConsistency(e,t){if(t.rt&&(t.rt=Math.round(t.rt)),e.trial_duration&&t.rt&&t.rt>e.trial_duration&&(t.rt=null,t.response&&(t.response=null),t.correct&&(t.correct=!1)),e.choices&&e.choices=="NO_KEYS"&&(t.rt&&(t.rt=null),t.response&&(t.response=null)),e.allow_response_before_complete&&e.sequence_reps&&e.frame_time){const n=e.sequence_reps*e.frame_time*e.stimuli.length;t.rt<n&&(t.rt=null,t.response=null)}}}class ft{constructor(){this.timeout_handlers=[]}setTimeout(e,t){const n=window.setTimeout(e,t);return this.timeout_handlers.push(n),n}clearAllTimeouts(){for(const e of this.timeout_handlers)clearTimeout(e);this.timeout_handlers=[]}}function pt(r){const e=r.getInitSettings(),t=new ut(r.getDisplayContainerElement,e.case_sensitive_responses,e.minimum_valid_rt),n=new ft,s=new dt(e.use_webaudio),l=new ht(r.getDisplayContainerElement,n.setTimeout.bind(n));return Object.assign({},...[t,n,s,l].map(a=>ce(a)))}function mt(r=Math.random().toString()){return Math.random=it(r),r}function de(r,e,t=!1){const n=Array.isArray(r),s=Array.isArray(e);if(!n)s?(e=[e[0]],console.log("Unclear parameters given to randomization.repeat. Multiple set sizes specified, but only one item exists to sample. Proceeding using the first set size.")):(r=[r],e=[e]);else if(s){if(r.length!=e.length)if(console.warn("Unclear parameters given to randomization.repeat. Items and repetitions are unequal lengths. Behavior may not be as expected."),e.length<r.length){let o=[];for(let i=0;i<r.length;i++)o.push(e);e=o}else e=e.slice(0,r.length)}else{let o=[];for(let i=0;i<r.length;i++)o.push(e);e=o}let l=[];for(let o=0;o<r.length;o++)for(let i=0;i<e[o];i++)r[o]==null||typeof r[o]!="object"?l.push(r[o]):l.push(Object.assign({},r[o]));let a=V(l);return t&&(a=kt(a)),a}function V(r){Array.isArray(r)||console.error("Argument to shuffle() must be an array.");const e=r.slice(0);let t=e.length,n,s;for(;t;)s=Math.floor(Math.random()*t--),n=e[t],e[t]=e[s],e[s]=n;return e}function gt(r,e){Array.isArray(r)||console.error("First argument to shuffleNoRepeats() must be an array."),typeof e<"u"&&typeof e!="function"&&console.error("Second argument to shuffleNoRepeats() must be a function."),typeof e>"u"&&(e=function(n,s){return n===s});const t=V(r);for(let n=0;n<t.length-1;n++)if(e(t[n],t[n+1])){let s=Math.floor(Math.random()*(t.length-2))+1;for(;e(t[n+1],t[s])||e(t[n+1],t[s+1])||e(t[n+1],t[s-1])||e(t[n],t[s]);)s=Math.floor(Math.random()*(t.length-2))+1;const l=t[s];t[s]=t[n+1],t[n+1]=l}return t}function Le(r,e=!1){const t=r.length;if(t==1)return console.warn("shuffleAlternateGroups() was called with only one group. Defaulting to simple shuffle."),V(r[0]);let n=[];for(let o=0;o<t;o++)n.push(o);e&&(n=V(n));const s=[];let l=null;for(let o=0;o<t;o++)l=l===null?r[o].length:Math.min(l,r[o].length),s.push(V(r[o]));const a=[];for(let o=0;o<l;o++)for(let i=0;i<n.length;i++)a.push(s[n[i]][o]);return a}function Se(r,e){return Array.isArray(r)||console.error("First argument to sampleWithoutReplacement() must be an array"),e>r.length&&console.error("Cannot take a sample larger than the size of the set of items to sample."),V(r).slice(0,e)}function Te(r,e,t){Array.isArray(r)||console.error("First argument to sampleWithReplacement() must be an array");const n=[];if(typeof t<"u"){t.length!==r.length&&console.error("The length of the weights array must equal the length of the array to be sampled from.");let a=0;for(const o of t)a+=o;for(const o of t)n.push(o/a)}else for(let a=0;a<r.length;a++)n.push(1/r.length);const s=[n[0]];for(let a=1;a<n.length;a++)s.push(n[a]+s[a-1]);const l=[];for(let a=0;a<e;a++){const o=Math.random();let i=0;for(;o>s[i];)i++;l.push(r[i])}return l}function yt(r,e=1,t=!1){let n=[{}];for(const[s,l]of Object.entries(r)){const a=[];for(const o of l)for(const i of n)a.push({...i,[s]:o});n=a}return de(n,e,t)}function bt(r=32){let e="";const t="0123456789abcdefghjklmnopqrstuvwxyz";for(let n=0;n<r;n++)e+=t[Math.floor(Math.random()*t.length)];return e}function wt(r,e){if(e<r)throw new Error("Upper boundary must be greater than or equal to lower boundary");return r+Math.floor(Math.random()*(e-r+1))}function vt(r){return Math.random()<=r?1:0}function se(r,e){return Et()*e+r}function re(r){return-Math.log(Math.random())/r}function xt(r,e,t,n=!1){let s=se(r,e)+re(t);if(n)for(;s<=0;)s=se(r,e)+re(t);return s}function _t(r){return tt(r)}function Et(){for(var r=0,e=0;r===0;)r=Math.random();for(;e===0;)e=Math.random();return Math.sqrt(-2*Math.log(r))*Math.cos(2*Math.PI*e)}function kt(r){const e={};for(const t of r)for(const n of Object.keys(t))typeof e[n]>"u"&&(e[n]=[]),e[n].push(t[n]);return e}var At=Object.freeze({__proto__:null,factorial:yt,randomID:bt,randomInt:wt,randomWords:_t,repeat:de,sampleBernoulli:vt,sampleExGaussian:xt,sampleExponential:re,sampleNormal:se,sampleWithReplacement:Te,sampleWithoutReplacement:Se,setSeed:mt,shuffle:V,shuffleAlternateGroups:Le,shuffleNoRepeats:gt});function Ie(){const r={previewMode:!1,outsideTurk:!1,hitId:"INVALID_URL_PARAMETER",assignmentId:"INVALID_URL_PARAMETER",workerId:"INVALID_URL_PARAMETER",turkSubmitTo:"INVALID_URL_PARAMETER"},e=function(s,l){l=l.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const a="[\\?&]"+l+"=([^&#]*)",i=new RegExp(a).exec(s);return i==null?"":i[1]},t=e(window.location.href,"assignmentId")?window.location.href:document.referrer;return["assignmentId","hitId","workerId","turkSubmitTo"].map(function(s){r[s]=unescape(e(t,s))}),r.previewMode=r.assignmentId=="ASSIGNMENT_ID_NOT_AVAILABLE",r.outsideTurk=!r.previewMode&&r.hitId===""&&r.assignmentId==""&&r.workerId=="",r}function Pt(r){const e=Ie(),t=e.assignmentId,n=e.turkSubmitTo;if(!t||!n)return;const s=document.createElement("form");s.method="POST",s.action=n+"/mturk/externalSubmit?assignmentId="+t;for(const l in r)if(r.hasOwnProperty(l)){const a=document.createElement("input");a.type="hidden",a.name=l,a.id=l,a.value=r[l],s.appendChild(a)}document.body.appendChild(s),s.submit()}var Lt=Object.freeze({__proto__:null,submitToTurk:Pt,turkInfo:Ie});class St{constructor(e,t){this.containerElement=e,this.message=t,this._progress=0,this.setupElements()}setupElements(){this.messageSpan=document.createElement("span"),this.innerDiv=document.createElement("div"),this.innerDiv.id="jspsych-progressbar-inner",this.update();const e=document.createElement("div");e.id="jspsych-progressbar-outer",e.appendChild(this.innerDiv),this.containerElement.appendChild(this.messageSpan),this.containerElement.appendChild(e)}update(){this.innerDiv.style.width=this._progress*100+"%",typeof this.message=="function"?this.messageSpan.innerHTML=this.message(this._progress):this.messageSpan.innerHTML=this.message}set progress(e){if(typeof e!="number"||e<0||e>1)throw new Error("jsPsych.progressBar.progress must be a number between 0 and 1");this._progress=e,this.update()}get progress(){return this._progress}}class oe{constructor(e){this.name=e}}const Tt=["timeline","timeline_variables","name","repetitions","loop_function","conditional_function","randomize_order","sample","on_timeline_start","on_timeline_finish"];function It(r){return!ae(r)}function ae(r){return!!r.timeline||Array.isArray(r)}var x=(r=>(r[r.PENDING=0]="PENDING",r[r.RUNNING=1]="RUNNING",r[r.PAUSED=2]="PAUSED",r[r.COMPLETED=3]="COMPLETED",r[r.ABORTED=4]="ABORTED",r))(x||{});class Ce{constructor(){this.reset()}reset(){this.promise=new Promise(e=>{this.resolvePromise=e})}get(){return this.promise}resolve(e){this.resolvePromise(e),this.reset()}}function Ct(r){return r&&typeof r.then=="function"}function jt(r){return new Promise(e=>setTimeout(e,r))}function Ae([r,...e]){let t=r??"";for(const n of e)t+=Number.isNaN(Number.parseInt(n))?`.${n}`:`[${n}]`;return t}function Ot(r){return typeof r=="object"&&r!==null}class he{constructor(){this.cache=new Map}static lookupChild(e,t){let n=!1,s;return Number.isNaN(Number.parseInt(t))?Object.hasOwn(e,t)&&(n=!0,s=e[t]):Number.parseInt(t)<e.length&&(n=!0,s=e[t]),{doesPathExist:n,value:s}}get(e){return this.cache.get(e.join("."))}has(e){return this.cache.has(e.join("."))}initialize(e){this.rootObject=e,this.cache.set("",e)}reset(){this.cache.clear(),this.cache.set("",this.rootObject)}set(e,t){this.cache.set(e.join("."),t)}lookup(e){if(this.has(e))return{doesPathExist:!0,value:this.get(e)};const t=n=>{const s=n.slice(0,-1),l=n[n.length-1];if(!this.has(s)&&s.length>0&&!t(s).doesPathExist)return{doesPathExist:!1};const a=this.get(s);if(!Ot(a))return{doesPathExist:!1};const o=he.lookupChild(a,l);return o.doesPathExist&&this.set(n,o.value),o};return t(e)}}class je{constructor(e){this.dependencies=e,this.status=x.PENDING,this.parameterValueCache=new he}getStatus(){return this.status}initializeParameterValueCache(){this.parameterValueCache.initialize(this.description)}resetParameterValueCache(){var e;this.parameterValueCache.reset(),(e=this.parent)==null||e.resetParameterValueCache()}getParameterValue(e,t={}){const{evaluateFunctions:n=!0,recursive:s=!0,cacheResult:l=!0,replaceResult:a}=t;typeof e=="string"&&(e=[e]);let{doesPathExist:o,value:i}=this.parameterValueCache.lookup(e);return!o&&s&&this.parent&&(i=this.parent.getParameterValue(e,t)),typeof i=="function"&&n&&(i=i()),i instanceof oe&&(i=this.evaluateTimelineVariable(i)),typeof a=="function"&&(i=a(i)),l&&this.parameterValueCache.set(e,i),i}getDataParameter(){var t;const e=this.getParameterValue("data",{recursive:!1});return{...Object.fromEntries(typeof e=="object"?Object.keys(e).map(n=>[n,this.getParameterValue(["data",n])]):[]),...(t=this.parent)==null?void 0:t.getDataParameter()}}}class Z extends je{constructor(e,t,n){var s;if(super(e),this.description=t,this.parent=n,this.onLoad=()=>{this.runParameterCallback("on_load"),this.dependencies.runOnLoadExtensionCallbacks(this.getParameterValue("extensions"))},this.initializeParameterValueCache(),this.trialObject=S(t),this.pluginClass=this.getParameterValue("type",{evaluateFunctions:!1}),this.pluginInfo=(s=this.pluginClass)==null?void 0:s.info,!this.pluginInfo)throw new Error("Plugin not recognized. Please provide a valid plugin using the 'type' parameter.");!("version"in this.pluginInfo)&&!("data"in this.pluginInfo)?console.warn(this.pluginInfo.name,"is missing the 'version' and 'data' fields. Please update plugin as 'version' and 'data' will be required in v9. See https://www.jspsych.org/latest/developers/plugin-development/ for more details."):"version"in this.pluginInfo?"data"in this.pluginInfo||console.warn(this.pluginInfo.name,"is missing the 'data' field. Please update plugin as 'data' will be required in v9. See https://www.jspsych.org/latest/developers/plugin-development/ for more details."):console.warn(this.pluginInfo.name,"is missing the 'version' field. Please update plugin as 'version' will be required in v9. See https://www.jspsych.org/latest/developers/plugin-development/ for more details.")}async run(){this.status=x.RUNNING,this.processParameters(),this.onStart(),this.addCssClasses(),this.pluginInstance=this.dependencies.instantiatePlugin(this.pluginClass),this.result=this.processResult(await this.executeTrial()),this.dependencies.onTrialResultAvailable(this),this.status=x.COMPLETED,await this.onFinish(),this.removeCssClasses();const e=this.getParameterValue("post_trial_gap")??this.dependencies.getDefaultIti();e!==0&&this.dependencies.getSimulationMode()!=="data-only"&&await jt(e),this.resetParameterValueCache()}async executeTrial(){const e=this.dependencies.finishTrialPromise.get();let t=!1;e.then(()=>{t=!0});const{trialReturnValue:n,hasTrialBeenSimulated:s}=this.invokeTrialMethod();let l;return Ct(n)?(l=await Promise.race([n,e]),t&&(l=await e)):(s||this.onLoad(),l=await e),this.cleanupTrial(),l}invokeTrialMethod(){const e=this.dependencies.getSimulationMode();if(e&&typeof this.pluginInstance.simulate=="function"){const t=this.getSimulationOptions();if(t.simulate!==!1)return{hasTrialBeenSimulated:!0,trialReturnValue:this.pluginInstance.simulate(this.trialObject,t.mode??e,t,this.onLoad)}}return{hasTrialBeenSimulated:!1,trialReturnValue:this.pluginInstance.trial(this.dependencies.getDisplayElement(),this.trialObject,this.onLoad)}}cleanupTrial(){this.dependencies.clearAllTimeouts(),this.dependencies.getDisplayElement().innerHTML=""}addCssClasses(){const e=this.getParameterValue("css_classes"),t=this.dependencies.getDisplayElement().classList;typeof e=="string"?t.add(e):Array.isArray(e)&&t.add(...e)}removeCssClasses(){const e=this.getParameterValue("css_classes");e&&this.dependencies.getDisplayElement().classList.remove(...typeof e=="string"?[e]:e)}processResult(e){e||(e={});for(const[n,s]of Object.entries(this.getParameterValue("save_trial_parameters")??{}))if(this.pluginInfo.parameters[n])if(s&&!Object.hasOwn(e,n)){let l=this.trialObject[n];typeof l=="function"&&(l=l.toString()),e[n]=l}else!s&&Object.hasOwn(e,n)&&delete e[n];else console.warn(`Non-existent parameter "${n}" specified in save_trial_parameters.`);e={...this.getDataParameter(),...e,trial_type:this.pluginInfo.name,trial_index:this.index,plugin_version:this.pluginInfo.version?this.pluginInfo.version:null};const t=this.getParameterValue("save_timeline_variables");return t===!0?e.timeline_variables={...this.parent.getAllTimelineVariables()}:Array.isArray(t)&&(e.timeline_variables=Object.fromEntries(Object.entries(this.parent.getAllTimelineVariables()).filter(([n,s])=>t.includes(n)))),e}runParameterCallback(e,...t){const n=this.getParameterValue(e,{evaluateFunctions:!1});if(n)return n(...t)}onStart(){this.dependencies.onTrialStart(this),this.runParameterCallback("on_start",this.trialObject),this.dependencies.runOnStartExtensionCallbacks(this.getParameterValue("extensions"))}async onFinish(){const e=await this.dependencies.runOnFinishExtensionCallbacks(this.getParameterValue("extensions"));Object.assign(this.result,e),await Promise.resolve(this.runParameterCallback("on_finish",this.getResult())),this.dependencies.onTrialFinished(this)}evaluateTimelineVariable(e){var t;return(t=this.parent)==null?void 0:t.evaluateTimelineVariable(e)}getParameterValue(e,t={}){return Tt.includes(typeof e=="string"?e:e[0])&&(t.recursive=!1),super.getParameterValue(e,t)}getSimulationOptions(){const e=this.getParameterValue("simulation_options",{replaceResult:(t={})=>{if(typeof t=="string"){const n=this.dependencies.getGlobalSimulationOptions();t=n[t]??n.default??{}}return Q(S(this.dependencies.getGlobalSimulationOptions().default),S(t))}});return typeof e>"u"?{}:(e.mode=this.getParameterValue(["simulation_options","mode"]),e.simulate=this.getParameterValue(["simulation_options","simulate"]),e.data=this.getParameterValue(["simulation_options","data"]),typeof e.data=="object"&&(e.data=Object.fromEntries(Object.keys(e.data).map(t=>[t,this.getParameterValue(["simulation_options","data",t])]))),e)}getResult(){return this.getParameterValue("record_data")===!1?void 0:this.result}getResults(){const e=this.getResult();return e?[e]:[]}processParameters(){const e=(n,s,l=[])=>{for(const[a,o]of Object.entries(s)){const i=[...l,a];let d=this.getParameterValue(i,{evaluateFunctions:o.type!==m.FUNCTION,replaceResult:h=>{if(typeof h>"u"){if(typeof o.default>"u")throw new Error(`You must specify a value for the "${Ae(i)}" parameter in the "${this.pluginInfo.name}" plugin.`);return o.default}else return h}});if(o.array&&!Array.isArray(d)){const h=Ae(i);throw new Error(`A non-array value (\`${d}\`) was provided for the array parameter "${h}" in the "${this.pluginInfo.name}" plugin. Please make sure that "${h}" is an array.`)}o.type===m.COMPLEX&&o.nested&&(o.array?d=d.map((h,c)=>{const u=[...i,c.toString()],f=this.getParameterValue(u);return e(f,o.nested,u),f}):e(d,o.nested,i)),n[a]=d}},t=S(this.description);e(t,this.pluginInfo.parameters),this.trialObject=t}getLatestNode(){return this}getActiveTimelineByName(e){}}class M extends je{constructor(e,t,n){super(e),this.parent=n,this.children=[],this.shouldAbort=!1,this.resumePromise=new Ce,this.description=Array.isArray(t)?{timeline:t}:t,this.initializeParameterValueCache()}async run(){typeof this.index>"u"&&(this.index=0),this.status=x.RUNNING;const{conditional_function:e,loop_function:t,repetitions:n=1}=this.description;let s=this.generateTimelineVariableOrder();this.setCurrentTimelineVariablesByIndex(s[0]);let l=!0,a;if(!e||e()){this.onStart();for(let o=0;o<n;o++)do{a=[],l?l=!1:s=this.generateTimelineVariableOrder();for(const i of s){this.setCurrentTimelineVariablesByIndex(i);for(const d of this.description.timeline){const h=this.instantiateChildNode(d),c=this.currentChild;if(this.currentChild=h,h.index=c?c.getLatestNode().index+1:this.index,await h.run(),this.status===x.PAUSED&&await this.resumePromise.get(),this.shouldAbort){this.status=x.ABORTED;return}a.push(...this.currentChild.getResults())}}}while(t&&t(new _(a)));this.onFinish()}this.status=x.COMPLETED}onStart(){this.description.on_timeline_start&&this.description.on_timeline_start()}onFinish(){this.description.on_timeline_finish&&this.description.on_timeline_finish()}pause(){this.currentChild instanceof M&&this.currentChild.pause(),this.status=x.PAUSED}resume(){this.status==x.PAUSED&&(this.currentChild instanceof M&&this.currentChild.resume(),this.status=x.RUNNING,this.resumePromise.resolve())}abort(){(this.status===x.RUNNING||this.status===x.PAUSED)&&(this.currentChild instanceof M&&this.currentChild.abort(),this.shouldAbort=!0,this.status===x.PAUSED&&this.resume())}instantiateChildNode(e){const t=ae(e)?new M(this.dependencies,e,this):new Z(this.dependencies,e,this);return this.children.push(t),t}setCurrentTimelineVariablesByIndex(e){var t;this.currentTimelineVariables={...(t=this.parent)==null?void 0:t.getAllTimelineVariables(),...e===null?void 0:this.description.timeline_variables[e]}}generateTimelineVariableOrder(){var s;const e=(s=this.description.timeline_variables)==null?void 0:s.length;if(!e)return[null];let t=[...Array(e).keys()];const n=this.description.sample;if(n)switch(n.type){case"custom":t=n.fn(t);break;case"with-replacement":t=Te(t,n.size,n.weights);break;case"without-replacement":t=Se(t,n.size);break;case"fixed-repetitions":t=de(t,n.size);break;case"alternate-groups":t=Le(n.groups,n.randomize_group_order);break;default:throw new Error(`Invalid type "${n.type}" in timeline sample parameters. Valid options for type are "custom", "with-replacement", "without-replacement", "fixed-repetitions", and "alternate-groups"`)}return this.description.randomize_order&&(t=V(t)),t}getAllTimelineVariables(){return this.currentTimelineVariables}evaluateTimelineVariable(e){var t;if((t=this.currentTimelineVariables)!=null&&t.hasOwnProperty(e.name))return this.currentTimelineVariables[e.name];throw new Error(`Timeline variable ${e.name} not found.`)}getResults(){const e=[];for(const t of this.children)if(t instanceof Z){const n=t.getResult();n&&e.push(n)}else t instanceof M&&e.push(...t.getResults());return e}getNaiveProgress(){if(this.status===x.PENDING)return 0;const e=this.getLatestNode();if(!e)return 1;let t=e.index;return e.getStatus()===x.COMPLETED&&t++,Math.min(t/this.getNaiveTrialCount(),1)}getNaiveTrialCount(){const e=t=>{var s,l;const n=a=>a.map(o=>e(o)).reduce((o,i)=>o+i);if(Array.isArray(t))return n(t);if(It(t))return 1;if(ae(t)){let a=((s=t.timeline_variables)==null?void 0:s.length)||1;switch((l=t.sample)==null?void 0:l.type){case"with-replacement":case"without-replacement":a=t.sample.size;break;case"fixed-repetitions":a*=t.sample.size;break;case"alternate-groups":a=t.sample.groups.map(o=>o.length).reduce((o,i)=>o+i,0);break}return n(t.timeline)*(t.repetitions??1)*a}return 0};return e(this.description)}getLatestNode(){var e;return((e=this.currentChild)==null?void 0:e.getLatestNode())??this}getActiveTimelineByName(e){var t;return this.description.name===e?this:(t=this.currentChild)==null?void 0:t.getActiveTimelineByName(e)}}class Rt{constructor(e){this.turk=Lt,this.randomization=At,this.utils=rt,this.citation={apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '},this.options={},this.isFileProtocolUsed=!1,this.finishTrialPromise=new Ce,this.timelineDependencies={onTrialStart:t=>{this.options.on_trial_start(t.trialObject),this.getDisplayContainerElement().focus(),this.getDisplayElement().scrollTop=0},onTrialResultAvailable:t=>{const n=t.getResult();n&&(n.time_elapsed=this.getTotalTime(),this.data.write(t))},onTrialFinished:t=>{const n=t.getResult();this.options.on_trial_finish(n),n&&this.options.on_data_update(n),this.progressBar&&this.options.auto_update_progress_bar&&(this.progressBar.progress=this.timeline.getNaiveProgress())},runOnStartExtensionCallbacks:t=>this.extensionManager.onStart(t),runOnLoadExtensionCallbacks:t=>this.extensionManager.onLoad(t),runOnFinishExtensionCallbacks:t=>this.extensionManager.onFinish(t),getSimulationMode:()=>this.simulationMode,getGlobalSimulationOptions:()=>this.simulationOptions,instantiatePlugin:t=>new t(this),getDisplayElement:()=>this.getDisplayElement(),getDefaultIti:()=>this.getInitSettings().default_iti,finishTrialPromise:this.finishTrialPromise,clearAllTimeouts:()=>this.pluginAPI.clearAllTimeouts()},this.extensionManagerDependencies={instantiateExtension:t=>new t(this)},this.dataDependencies={getProgress:()=>{var t;return{time:this.getTotalTime(),trial:((t=this.timeline)==null?void 0:t.getLatestNode().index)??0}},onInteractionRecordAdded:t=>{this.options.on_interaction_data_update(t)},getDisplayElement:()=>this.getDisplayElement()},e={display_element:void 0,on_finish:()=>{},on_trial_start:()=>{},on_trial_finish:()=>{},on_data_update:()=>{},on_interaction_data_update:()=>{},on_close:()=>{},use_webaudio:!0,show_progress_bar:!1,message_progress_bar:"Completion Progress",auto_update_progress_bar:!0,default_iti:0,minimum_valid_rt:0,experiment_width:null,override_safe_mode:!1,case_sensitive_responses:!1,extensions:[],...e},this.options=e,ce(this),window.location.protocol=="file:"&&(e.override_safe_mode===!1||typeof e.override_safe_mode>"u")&&(e.use_webaudio=!1,this.isFileProtocolUsed=!0,console.warn("jsPsych detected that it is running via the file:// protocol and not on a web server. To prevent issues with cross-origin requests, Web Audio and video preloading have been disabled. If you would like to override this setting, you can set 'override_safe_mode' to 'true' in initJsPsych. For more information, see: https://www.jspsych.org/overview/running-experiments")),this.data=new ct(this.dataDependencies),this.pluginAPI=pt(this),this.extensionManager=new H(this.extensionManagerDependencies,e.extensions)}version(){return st}async run(e){typeof e>"u"&&console.error("No timeline declared in jsPsych.run(). Cannot start experiment."),e.length===0&&console.error("No trials have been added to the timeline (the timeline is an empty array). Cannot start experiment."),this.timeline=new M(this.timelineDependencies,e),await this.prepareDom(),await this.extensionManager.initializeExtensions(),document.documentElement.setAttribute("jspsych","present"),this.experimentStartTime=new Date,await this.timeline.run(),await Promise.resolve(this.options.on_finish(this.data.get())),this.endMessage&&(this.getDisplayElement().innerHTML=this.endMessage),this.data.removeInteractionListeners()}async simulate(e,t="data-only",n={}){this.simulationMode=t,this.simulationOptions=n,await this.run(e)}getProgress(){var e,t,n;return{total_trials:(e=this.timeline)==null?void 0:e.getNaiveTrialCount(),current_trial_global:((t=this.timeline)==null?void 0:t.getLatestNode().index)??0,percent_complete:((n=this.timeline)==null?void 0:n.getNaiveProgress())*100}}getStartTime(){return this.experimentStartTime}getTotalTime(){return this.experimentStartTime?new Date().getTime()-this.experimentStartTime.getTime():0}getDisplayElement(){return this.displayElement}getDisplayContainerElement(){return this.displayContainerElement}abortExperiment(e,t={}){this.endMessage=e,this.timeline.abort(),this.pluginAPI.cancelAllKeyboardResponses(),this.pluginAPI.clearAllTimeouts(),this.finishTrial(t)}abortCurrentTimeline(){var t;let e=(t=this.timeline)==null?void 0:t.getLatestNode();e instanceof Z&&(e=e.parent),e instanceof M&&e.abort()}abortTimelineByName(e){var n;const t=(n=this.timeline)==null?void 0:n.getActiveTimelineByName(e);t&&t.abort()}getCurrentTrial(){var t;const e=(t=this.timeline)==null?void 0:t.getLatestNode();if(e instanceof Z)return e.description}getInitSettings(){return this.options}timelineVariable(e){return new oe(e)}evaluateTimelineVariable(e){var t,n;return(n=(t=this.timeline)==null?void 0:t.getLatestNode())==null?void 0:n.evaluateTimelineVariable(new oe(e))}pauseExperiment(){var e;(e=this.timeline)==null||e.pause()}resumeExperiment(){var e;(e=this.timeline)==null||e.resume()}getSafeModeStatus(){return this.isFileProtocolUsed}getTimeline(){var e;return(e=this.timeline)==null?void 0:e.description.timeline}getCitations(e=[],t="apa"){const n=["apa","bibtex"];if(t=t.toLowerCase(),Array.isArray(e))if(n.includes(t)){const s=this.citation[t],l=new Set([s]);for(const o of e)try{const i=o.info.citations[t];l.add(i)}catch{console.error(`${o} does not have citation in ${t} format.`)}return Array.from(l).join(`
`)}else throw new Error("Unsupported citation format");else throw new Error("Expected array of plugins/extensions")}get extensions(){var e;return((e=this.extensionManager)==null?void 0:e.extensions)??{}}async prepareDom(){document.readyState!=="complete"&&await new Promise(s=>{window.addEventListener("load",s)});const e=this.options;if(typeof e.display_element>"u"){let s=document.body;s||(s=document.createElement("body"),document.documentElement.appendChild(s)),document.querySelector("html").style.height="100%",s.style.margin="0px",s.style.height="100%",s.style.width="100%",e.display_element=s}else{const s=e.display_element instanceof Element?e.display_element:document.querySelector("#"+e.display_element);s===null?console.error("The display_element specified in initJsPsych() does not exist in the DOM."):e.display_element=s}const t=document.createElement("div");t.id="jspsych-content";const n=document.createElement("div");if(n.className="jspsych-content-wrapper",n.appendChild(t),this.displayContainerElement=e.display_element,this.displayContainerElement.appendChild(n),this.displayElement=t,e.experiment_width!==null&&(this.displayElement.style.width=e.experiment_width+"px"),e.display_element.tabIndex=0,this.displayContainerElement.classList.add("jspsych-display-element"),this.displayElement.classList.add("jspsych-content"),this.data.createInteractionListeners(),window.addEventListener("beforeunload",e.on_close),this.options.show_progress_bar){const s=document.createElement("div");s.id="jspsych-progressbar-container",this.progressBar=new St(s,this.options.message_progress_bar),this.getDisplayContainerElement().insertAdjacentElement("afterbegin",s)}}finishTrial(e){this.finishTrialPromise.resolve(e)}}class N extends Error{constructor(e="The global `jsPsych` variable is no longer available in jsPsych v7."){super(`${e} Please follow the migration guide at https://www.jspsych.org/7.0/support/migration-v7/ to update your experiment.`),this.name="MigrationError"}}window.jsPsych={get init(){throw new N("`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.")},get data(){throw new N},get randomization(){throw new N},get turk(){throw new N},get pluginAPI(){throw new N},get ALL_KEYS(){throw new N('jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.')},get NO_KEYS(){throw new N('jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.')}};typeof window<"u"&&window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext);function Nt(r){const e=new Rt(r);return Object.defineProperties(e,Object.fromEntries(Object.entries({init:"`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.",ALL_KEYS:'jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.',NO_KEYS:'jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.',currentTimelineNodeID:"`currentTimelineNodeID()` was renamed to `getCurrentTimelineNodeID()` in jsPsych v7.",progress:"`progress()` was renamed to `getProgress()` in jsPsych v7.",startTime:"`startTime()` was renamed to `getStartTime()` in jsPsych v7.",totalTime:"`totalTime()` was renamed to `getTotalTime()` in jsPsych v7.",currentTrial:"`currentTrial()` was renamed to `getCurrentTrial()` in jsPsych v7.",initSettings:"`initSettings()` was renamed to `getInitSettings()` in jsPsych v7.",allTimelineVariables:"`allTimelineVariables()` was renamed to `getAllTimelineVariables()` in jsPsych v7."}).map(([n,s])=>[n,{get(){throw new N(s)}}]))),e}var Mt="2.1.0";const Vt={name:"html-button-response",version:Mt,parameters:{stimulus:{type:m.HTML_STRING,default:void 0},choices:{type:m.STRING,default:void 0,array:!0},button_html:{type:m.FUNCTION,default:function(r,e){return`<button class="jspsych-btn">${r}</button>`}},prompt:{type:m.HTML_STRING,default:null},stimulus_duration:{type:m.INT,default:null},trial_duration:{type:m.INT,default:null},button_layout:{type:m.STRING,default:"grid"},grid_rows:{type:m.INT,default:1},grid_columns:{type:m.INT,default:null},response_ends_trial:{type:m.BOOL,default:!0},enable_button_after:{type:m.INT,default:0}},data:{rt:{type:m.INT},response:{type:m.INT},stimulus:{type:m.HTML_STRING}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}},fe=class fe{constructor(e){this.jsPsych=e}trial(e,t){const n=document.createElement("div");n.id="jspsych-html-button-response-stimulus",n.innerHTML=t.stimulus,e.appendChild(n);const s=document.createElement("div");if(s.id="jspsych-html-button-response-btngroup",t.button_layout==="grid"){if(s.classList.add("jspsych-btn-group-grid"),t.grid_rows===null&&t.grid_columns===null)throw new Error("You cannot set `grid_rows` to `null` without providing a value for `grid_columns`.");const c=t.grid_columns===null?Math.ceil(t.choices.length/t.grid_rows):t.grid_columns,u=t.grid_rows===null?Math.ceil(t.choices.length/t.grid_columns):t.grid_rows;s.style.gridTemplateColumns=`repeat(${c}, 1fr)`,s.style.gridTemplateRows=`repeat(${u}, 1fr)`}else t.button_layout==="flex"&&s.classList.add("jspsych-btn-group-flex");for(const[c,u]of t.choices.entries()){s.insertAdjacentHTML("beforeend",t.button_html(u,c));const f=s.lastChild;f.dataset.choice=c.toString(),f.addEventListener("click",()=>{i(c)})}e.appendChild(s),t.prompt!==null&&e.insertAdjacentHTML("beforeend",t.prompt);var l=performance.now(),a={rt:null,button:null};const o=()=>{var c={rt:a.rt,stimulus:t.stimulus,response:a.button};this.jsPsych.finishTrial(c)};function i(c){var u=performance.now(),f=Math.round(u-l);a.button=parseInt(c),a.rt=f,n.classList.add("responded");for(const p of s.children)p.setAttribute("disabled","disabled");t.response_ends_trial&&o()}if(t.stimulus_duration!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{n.style.visibility="hidden"},t.stimulus_duration),t.enable_button_after>0){for(var d=document.querySelectorAll("#jspsych-html-button-response-btngroup button"),h=0;h<d.length;h++)d[h].setAttribute("disabled","disabled");this.jsPsych.pluginAPI.setTimeout(()=>{for(var c=document.querySelectorAll("#jspsych-html-button-response-btngroup button"),u=0;u<c.length;u++)c[u].removeAttribute("disabled")},t.enable_button_after)}t.trial_duration!==null&&this.jsPsych.pluginAPI.setTimeout(o,t.trial_duration)}simulate(e,t,n,s){t=="data-only"&&(s(),this.simulate_data_only(e,n)),t=="visual"&&this.simulate_visual(e,n,s)}create_simulation_data(e,t){const n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,.006666666666666667,!0)+e.enable_button_after,response:this.jsPsych.randomization.randomInt(0,e.choices.length-1)},s=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,s),s}simulate_data_only(e,t){const n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}simulate_visual(e,t,n){const s=this.create_simulation_data(e,t),l=this.jsPsych.getDisplayElement();this.trial(l,e),n(),s.rt!==null&&this.jsPsych.pluginAPI.clickTarget(l.querySelector(`#jspsych-html-button-response-btngroup [data-choice="${s.response}"]`),s.rt)}};fe.info=Vt;let $=fe;m.AUDIO,m.KEYS,m.HTML_STRING,m.INT,m.BOOL,m.BOOL,m.BOOL,m.STRING,m.INT,m.STRING;const C=Nt();async function Dt(){console.log(" Attempting to fetch CSV...");const r="./all_questions.csv";try{const e=await fetch(r);if(console.log(" Fetch response:",e),!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const t=await e.text();console.log(` CSV Loaded:
`,t);const n=t.trim().split(`
`).slice(1);if(console.log(" Parsed Rows:",n),n.length===0)return console.error(" No rows found in CSV!"),[];const s=n.map((l,a)=>{const o=l.split(",");if(o.length<10)return console.error(` Row ${a+1} is incomplete:`,l),null;const[i,d,h,c,u,f,p,b,T,k]=o.map(D=>D.trim());k||console.error(` Missing block type in row ${a+1}:`,l);const O={story:i.replace(/"/g,""),sounds:[d,h,c,u],correctIndex:parseInt(f),audioFile:p,confirmText:b.replace(/"/g,""),confirmSound:T,block:k};return console.log(` Loaded question ${a+1}:`,O),O}).filter(l=>l!==null);return console.log(" Final Questions Array:",s),s}catch(e){return console.error(" CSV Load Error:",e),[]}}async function $t(){const r=await Dt();if(r.length===0){console.error(" No questions loaded! Cannot proceed.");return}const e={voices:[],faces:[],bodies:[]};r.forEach(s=>{e[s.block]?e[s.block].push(s):console.error(` Unknown block type: ${s.block}`)});const t=Object.keys(e).sort(()=>Math.random()-.5),n=[{type:$,stimulus:"<p>Welcome to the study! Press 'Start' to begin.</p>",choices:["Start"]}];console.log(" Block Order:",t),console.log(" Blocks:",e),t.forEach(s=>{if(console.log(` Processing block: ${s}`),console.log(` Found ${e[s].length} questions in ${s}`),e[s].length===0){console.warn(` Skipping empty block: ${s}`);return}if(e[s].length===0)return;n.push({type:$,stimulus:`<p>Instructions for the ${s} block.</p>`,choices:["Continue"]}),e[s].sort(()=>Math.random()-.5).forEach(a=>{console.log(` Adding question: ${a.story}`),n.push({timeline:[{type:$,stimulus:`
                            <div id="content-container" class="${a.block}-container">
                                ${a.block==="bodies"?`
                                        <div class="bodies-flex-container">
                                            <div id="story-container" class="bodies-story">
                                                <p id="story-text">${a.story}</p>
                                            </div>
                                            <div class="bodies-images">
                                                <img class="body-option" id="btn-1" src="bodies/${a.sounds[0]}" data-index="0" />
                                                <img class="body-option" id="btn-2" src="bodies/${a.sounds[1]}" data-index="1" />
                                                <img class="body-option" id="btn-3" src="bodies/${a.sounds[2]}" data-index="2" />
                                                <img class="body-option" id="btn-4" src="bodies/${a.sounds[3]}" data-index="3" />
                                            </div>
                                        </div>
                                    `:a.block==="faces"?`
                                        <div id="story-container">
                                            <p id="story-text">${a.story}</p>
                                        </div>
                                        <div class="button-container">
                                            <img class="face-option" id="btn-1" src="faces/${a.sounds[0]}" data-index="0" />
                                            <img class="face-option" id="btn-2" src="faces/${a.sounds[1]}" data-index="1" />
                                            <img class="face-option" id="btn-3" src="faces/${a.sounds[2]}" data-index="2" />
                                            <img class="face-option" id="btn-4" src="faces/${a.sounds[3]}" data-index="3" />
                                        </div>
                                    `:`
                                        <div id="story-container">
                                            <p id="story-text">${a.story}</p>
                                        </div>
                                        <div class="button-container">
                                            <button class="sound-btn" id="btn-1" disabled>1</button>
                                            <button class="sound-btn" id="btn-2" disabled>2</button>
                                            <button class="sound-btn" id="btn-3" disabled>3</button>
                                            <button class="sound-btn" id="btn-4" disabled>4</button>
                                        </div>
                                    `}
                            </div>
                        `,choices:[],on_load:function(){a.block==="faces"||a.block==="bodies"?document.body.classList.add(`${a.block}-block`):document.body.classList.remove("faces-block","bodies-block"),C.getDisplayElement().addEventListener("jspsych-trial-end",function(){document.body.classList.remove("faces-block")});const o=document.querySelectorAll(".sound-btn, .face-option, .body-option");o.forEach((h,c)=>{h.dataset.index=c,h.classList.add("disabled","no-hover"),h.setAttribute("disabled","true")});let i=new Audio(`audio/${a.audioFile}`);console.log(` Attempting to play: audio/${a.audioFile}`),i.play(),i.onended=function(){console.log(" Story finished."),a.block==="faces"||a.block==="bodies"?(console.log(` ${a.block} block detected! Enabling images.`),d(o)):(console.log(" Playing sequential sounds for non-image blocks."),zt(a.sounds,()=>{d(o),Ut(a.sounds)}))};function d(h){h.forEach(c=>{c.classList.remove("disabled","no-hover"),c.removeAttribute("disabled"),c.style.cursor="pointer"}),ee=!0,console.log(" answerSelectionEnabled set to true.")}o.forEach(h=>{h.addEventListener("click",function(c){if(!ee){c.preventDefault(),console.log(" Selection blocked until ready.");return}const u=parseInt(this.dataset.index);isNaN(u)||(console.log(` Selected choice: ${u}, File: ${a.sounds[u]}`),C.finishTrial({selected_choice:u,selected_file:a.sounds[u]}))})})},on_finish:function(o){console.log(" on_finish triggered!");const i=o.selected_choice;if(i===void 0){console.error(" ERROR: No response recorded!");return}C.getDisplayElement().replaceChildren(),o.story=a.story,o.story_audio=a.audioFile,o.option1=a.sounds[0],o.option2=a.sounds[1],o.option3=a.sounds[2],o.option4=a.sounds[3],o.correct_index=a.correctIndex,o.correct_response=a.sounds[a.correctIndex],o.selected_index=i,o.selected_response=a.sounds[i],o.confirmation_text=a.confirmText,o.confirmation_audio=a.confirmSound,o.block=a.block,console.log(" Trial data recorded:",o)}},{type:$,stimulus:function(){const o=C.data.get().last(1).values()[0];if(!o||o.selected_choice===void 0)return console.error(" ERROR: No previous selection found!"),"<p>Error: Could not load confirmation.</p>";console.log(" Using last trial data for confirmation:",o);let i="";return o.block==="faces"?i="faces-confirmation":o.block==="bodies"&&(i="bodies-confirmation"),`
                                <div id="content-container">
                                    <div id="story-container">
                                        <p id="story-text">${o.confirmation_text}</p>
                                    </div>
                                    <div class="confirmation-container">
                                        ${o.block==="faces"?`<img class="confirmation-img ${i}" src="faces/${o.selected_response}" />`:o.block==="bodies"?`<img class="confirmation-img ${i}" src="bodies/${o.selected_response}" />`:""}
                                    </div>
                                    <div class="button-container">
                                        <button class="confirm-btn" id="confirm-yes"> Yes</button>
                                        <button class="confirm-btn" id="confirm-no"> No</button>
                                    </div>
                                </div>
                            `},choices:[],on_load:function(){console.log(" Confirmation page loaded, waiting for user input.");const o=document.getElementById("confirm-yes"),i=document.getElementById("confirm-no");if(!o||!i){console.error(" ERROR: Confirmation buttons are missing!");return}o.replaceWith(o.cloneNode(!0)),i.replaceWith(i.cloneNode(!0)),document.getElementById("confirm-yes").addEventListener("click",()=>{console.log(" User confirmed choice!"),C.finishTrial({confirmed:!0})}),document.getElementById("confirm-no").addEventListener("click",()=>{console.log(" User chose to reselect!"),C.finishTrial({confirmed:!1})}),console.log(" Event listeners attached to confirmation buttons.")},on_start:function(){const o=C.data.get().last(1).values()[0];if(!o||o.selected_choice===void 0){console.error(" ERROR: No selected choice found!");return}console.log(` Playing confirmation audio: audio/${o.confirmation_audio}`);let i=new Audio(`audio/${o.confirmation_audio}`);i.play(),i.onended=function(){console.log(` Now playing selected choice: ${o.selected_response}`),o.block==="voices"?new Audio(`audio/${o.selected_response}`).play().catch(h=>console.error(" Error playing selected choice:",h)):console.log(" No audio to play for faces/bodies.")}}}],loop_function:function(o){const i=C.data.get().last(1).values()[0];return!i||typeof i.confirmed>"u"?(console.error(" Loop function error: No confirmation data found."),!1):i.confirmed===!1}})})}),n.push({type:$,stimulus:"<p>Thank you for participating! Click below to download your data.</p>",choices:["Download Data"],on_finish:function(){C.data.get().localSave("csv","experiment_data.csv")}}),console.log(" Constructed timeline before running jsPsych:",n),C.run(n)}function Bt(r){console.log(" Enabling buttons..."),r.forEach(e=>{e.classList.remove("disabled","no-hover"),e.removeAttribute("disabled"),e.style.transition="opacity 0.6s ease-in-out",e.style.opacity="1",console.log(` Enabled button: ${e.id}`)})}function zt(r,e){let t=0,n=0;console.log(" Starting sequential playback...");const s=document.querySelectorAll(".sound-btn");s.forEach(a=>{a.classList.add("disabled","no-hover"),a.setAttribute("disabled","true"),a.style.opacity="0.5"});function l(){if(t>=r.length){console.log(` All sounds played. Total duration: ${n}ms`),Bt(s),ee=!0,console.log(" answerSelectionEnabled set to:",ee),e();return}document.querySelectorAll(".sound-btn").forEach(i=>i.classList.remove("highlight"));const a=document.getElementById(`btn-${t+1}`);a&&a.classList.add("highlight");const o=new Audio(`audio/${r[t]}`);console.log(` Playing sound ${t+1}: ${r[t]}`),o.onloadedmetadata=function(){n+=o.duration*1e3},o.play(),o.onended=function(){a&&a.classList.remove("highlight"),t++,l()}}l()}function Ut(r){console.log(" Enabling hover play for sounds:",r);let e=null;r.forEach((t,n)=>{const s=document.getElementById(`btn-${n+1}`);if(!s){console.warn(` Button btn-${n+1} not found for hover play`);return}s.onmouseenter=()=>{e&&(e.pause(),e.currentTime=0),console.log(` Hover play: ${t}`),e=new Audio(`audio/${t.trim()}`),e.play()},s.onmouseleave=()=>{e&&(e.pause(),e.currentTime=0)}})}document.addEventListener("DOMContentLoaded",()=>{const r=document.createElement("style");r.innerHTML=`
        .enabled {
            transition: opacity 0.5s ease-in-out;
            opacity: 1 !important;
        }
        .sound-btn {
            opacity: 0; /* Start hidden */
        }
    `,document.head.appendChild(r)});let ee=!1;$t();
